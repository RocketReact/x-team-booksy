import{S as V,N as W,P as G,i as l,K as le,A as $e,a as C,b as Be}from"./assets/vendor-cle4eI2j.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{new V(".events-swiper",{modules:[W,G],wrapperClass:"events-swiper-wrapper",slideClass:"events-swiper-slide",loop:!1,spaceBetween:20,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".events-swiper-button-next",prevEl:".events-swiper-button-prev",disabledClass:"events-swiper-button-disabled"},pagination:{el:".events-swiper-pagination",clickable:!0}}),document.querySelectorAll(".events-item-time").forEach(t=>{t.textContent=Te()})});function Te(e=30){const t=new Date,o=new Date(t.getTime()+Math.random()*e*24*60*60*1e3),n={month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return` | ${o.toLocaleString("en-US",n)}`}const Y=document.getElementById("modal"),$=document.getElementById("modalBackdrop"),Ie=document.getElementById("modalClose"),S=document.getElementById("registerForm"),Q="register-form-data",g=S.elements.name,u=S.elements.email,J=S.elements.message;function ce(){const e={name:g.value.trim(),email:u.value.trim(),message:J.value.trim()};localStorage.setItem(Q,JSON.stringify(e))}function Me(){const e=localStorage.getItem(Q);if(e)try{const t=JSON.parse(e);t.name&&(g.value=t.name),t.email&&(u.value=t.email),t.message&&(J.value=t.message)}catch{l.error({title:"Error",message:"Failed to restore saved data.",position:"topRight"})}}function Ae(){localStorage.removeItem(Q)}const Re=document.querySelectorAll(".open-modal-btn"),Pe=Y.querySelector(".modal-subtitle");Re.forEach(e=>{e.addEventListener("click",t=>{const o=e.dataset.subtitle||"";Pe.textContent=o,Fe()})});function Fe(){Y.style.display="block",$.style.display="block",document.body.classList.add("modal-open"),Me()}function T(){Y.style.display="none",$.style.display="none",document.body.classList.remove("modal-open")}Ie.addEventListener("click",T);$.addEventListener("click",e=>{e.target===$&&T()});document.addEventListener("keydown",e=>{e.key==="Escape"&&T()});[g,u,J].forEach(e=>{e.addEventListener("input",ce)});S.addEventListener("submit",e=>{e.preventDefault();const t=g.value.trim(),o=u.value.trim();[g,u].forEach(s=>{s.addEventListener("input",()=>{s.classList.remove("error"),ce()})});let n=!1;if((!t||!o)&&(l.warning({title:"Warning",message:"Please fill out required fields: Name and Email",position:"topRight"}),t||g.classList.add("error"),o||u.classList.add("error"),n=!0),o&&!o.includes("@")&&(l.error({title:"Invalid Email",message:'Email must contain "@" symbol',position:"topRight"}),u.classList.add("error"),n=!0),!n)try{if(o==="error@example.com")throw new Error("Simulated server error");l.success({title:"Success",message:"Form submitted!",position:"topRight"}),S.reset(),Ae(),T()}catch(s){l.error({title:"Error",message:`Something went wrong: ${s.message}`,position:"topRight"})}});const D=document.querySelector("#burger-button"),U=document.querySelector("#mobile_menu"),oe=document.querySelector("#nav-links"),f=document.body,He=e=>{U.classList.add("mob-menu-open"),f.classList.add("no-scroll")},_e=e=>{const t=e.target.closest("button"),o=e.target.closest(".nav-list-mob-link");(t||o)&&(U.classList.remove("mob-menu-open"),f.classList.remove("no-scroll"))},de=()=>{window.innerWidth>=768?(oe.classList.remove("visually-hidden"),D.classList.add("visually-hidden")):(D.classList.remove("visually-hidden"),oe.classList.add("visually-hidden"))};de();D.addEventListener("click",He);U.addEventListener("click",_e);window.addEventListener("resize",de);window.addEventListener("scroll",e=>{const t=document.querySelector(".header"),o=document.querySelector(".cart-badge");window.scrollY>50?(t.classList.add("scrolled-header"),o.classList.add("scrolled-badge")):(t.classList.remove("scrolled-header"),o.classList.remove("scrolled-badge"))});const De=new V(".swiper-feedback",{modules:[W,G,le],wrapperClass:"swiper-wrapper-feedback",slideClass:"swiper-slide-feedback",loop:!1,direction:"horizontal",slidesPerView:1,slidesPerGroup:1,centeredSlides:!1,simulateTouch:!0,touchRatio:1,grabCursor:!0,watchOverflow:!0,speed:250,spaceBetween:24,lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},pagination:{el:".custom-swiper-pagination",type:"bullets",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:".feedback-custom-swiper-button-next",prevEl:".feedback-custom-swiper-button-prev",disabledClass:"feedback-custom-swiper-button-disabled"},keyboard:{enabled:!0,onlyInViewport:!0}});function Oe(){const e=window.innerWidth;return e>=1440?3:e>=768?2:1}function ue(){const e=De.slides.length,t=Oe(),o=document.querySelector(".custom-swiper-pagination"),n=document.querySelector(".feedback-custom-swiper-button-prev"),s=document.querySelector(".feedback-custom-swiper-button-next");e<=t?(o&&(o.style.display="none"),n&&(n.style.display="none"),s&&(s.style.display="none")):(o&&(o.style.display=""),n&&(n.style.display=""),s&&(s.style.display=""))}ue();window.addEventListener("resize",()=>{ue()});new V(".hero-swiper",{modules:[W,G,$e,le],direction:"horizontal",loop:!1,spaceBetween:16,grabCursor:!0,autoplay:{delay:2500,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-swiper-button-next",prevEl:".hero-swiper-button-prev"},on:{slideChange(e){const t=document.querySelector(".hero-swiper-button-next"),o=document.querySelector(".hero-swiper-button-prev");e.isEnd?t==null||t.classList.add("is-disabled"):t==null||t.classList.remove("is-disabled"),e.isBeginning?o==null||o.classList.add("is-disabled"):o==null||o.classList.remove("is-disabled")},init(e){const t=document.querySelector(".hero-swiper-button-prev");e.isBeginning?t==null||t.classList.add("is-disabled"):t==null||t.classList.remove("is-disabled")}}});document.querySelectorAll(".hero-swiper-button-prev, .hero-swiper-button-next").forEach(e=>{e.addEventListener("mouseup",()=>{e.blur()})});const Ne=[{alt:"Mug with book on the table",text:"Get 10% off your ",highlight:"first order",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-1-desktop.webp",src2x:"./img/desktop-webp/banner-1-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-1-tablet.webp",src2x:"./img/tablet-webp/banner-1-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-1-mob.webp",src2x:"./img/mob-webp/banner-1-mob@2x.webp"}}},{alt:"Glasses with book on the table",text:"Save 15% on ",highlight:"some books",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-2-desktop.webp",src2x:"./img/desktop-webp/banner-2-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-2-tablet.webp",src2x:"./img/tablet-webp/banner-2-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-2-mob.webp",src2x:"./img/mob-webp/banner-2-mob@2x.webp"}}},{alt:"Shelf with books",text:"Summer Sale! ",highlight:"Up to -40% discounts",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-3-desktop.webp",src2x:"./img/desktop-webp/banner-3-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-3-tablet.webp",src2x:"./img/tablet-webp/banner-3-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-3-mob.webp",src2x:"./img/mob-webp/banner-3-mob@2x.webp"}}},{alt:"Vase on the table",text:"Last chance to buy our ",highlight:"spring bestsellers",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-4-desktop.webp",src2x:"./img/desktop-webp/banner-4-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-4-tablet.webp",src2x:"./img/tablet-webp/banner-4-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-4-mob.webp",src2x:"./img/mob-webp/banner-4-mob@2x.webp"}}}],je=document.querySelector(".hero-js"),ze=e=>e.map(t=>`<li class="swiper-slide hero-swiper-slide">
      <picture>
      <source media="(min-width: 1440px)" type="image/webp" srcset="${t.images.desktop.src} 1x, ${t.images.desktop.src2x} 2x">
      <source media="(min-width: 768px)" type="image/webp" srcset="${t.images.tablet.src} 1x, ${t.images.tablet.src2x} 2x">
          <img 
            src="${t.images.mobile.src}" 
            srcset="${t.images.mobile.src} 1x, ${t.images.mobile.src2x} 2x"
            loading="lazy"
            width="343"
            height="199"
            alt="${t.alt}" />
          </picture>
          <div class="banner-wrapper">
            <p class="hero-text">
              ${t.text}<span class="hero-text-wrap">${t.highlight}</span>
            </p>
            <a class="hero-link" href="#books-section">Shop Now!</a>
          </div>
        </li>`).join(""),Ve=e=>{je.innerHTML=ze(e)};Ve(Ne);C.defaults.baseURL="https://books-backend.p.goit.global/books/";let P=null,F=null;async function pe(){if(P!==null)return P;try{const t=(await C.get("category-list")).data.filter(o=>o&&o.list_name&&o.list_name.trim()!==""&&o.list_name.trim()!==" ");return P=t,t}catch{return l.error({title:"Error",message:"Failed to load categories",position:"topRight"}),[]}}async function We(){try{return(await C.get("top-books")).data}catch{return l.error({title:"Error",message:"Failed to load top books",position:"topRight"}),[]}}async function K(e){try{const t=encodeURIComponent(e);return(await C.get(`category?category=${t}`)).data}catch{return l.error({title:"Error",message:`Failed to load books for category: ${e}`,position:"topRight"}),[]}}async function me(e){try{return(await C.get(e)).data}catch{return l.error({title:"Error",message:"Failed to load book details",position:"topRight"}),[]}}async function be(){if(F!==null)return F;try{const e=await pe();if(!e||!Array.isArray(e))return[];const t=e.filter(r=>r.list_name).map(r=>r.list_name),n=(await Promise.all(t.map(K))).flat(),s=new Set,i=n.filter(r=>{if(!r.title||!r.price||parseFloat(r.price)<=0)return!1;const a=r.title.trim().toLowerCase();return s.has(a)?!1:(s.add(a),!0)});return F=i,i}catch{return l.error({title:"Error",message:"Failed to load all books",position:"topRight"}),[]}}const w=document.querySelector(".top-books-list"),Ge=document.querySelector(".dropdown-menu"),ge=document.querySelector(".show-more-btn"),se=document.querySelector(".show-count");let E=[],X=1,Ye="All categories";const Qe="Top";let H=null;async function Je(){return H===null&&(H=(await be()).length),H}async function fe(e,t={}){const{isInitialLoad:o=!1,selectedCategory:n="All categories",resetContent:s=!0}=t;try{if(s&&(nt(),tt()),!Array.isArray(e)){l.warning({title:"Warning",message:"displayBooks: books should be an array",position:"topRight"});return}const i=he(e);ot(i),Ye=n;const r=Z(),a=i.slice(0,r);ft(a.length),a.length>0?ye(a):rt(),o&&await at(),await ke(),lt(i.length>r)}catch{l.error({title:"Error",message:"Error in displayBooks function",position:"topRight"}),it()}}function ye(e){const t=e.map(o=>`
        <li class="top-book-item" id="${o._id}">
            <img
              class="top-book-img"
              src="${o.book_image}"
              alt="${o.title}"
              width="343" height="488"
              loading="lazy"
            />
          <div class="top-book-info">
          <div class="top-book-info-wrap">
            <h3 class="top-book-title">${o.title.toLowerCase()}</h3>
            <p class="top-book-price">$${parseFloat(o.price).toFixed(2)}</p>
            </div>
            <p class="top-book-author">${o.author.toLowerCase()}</p>
          </div>
          <button class="top-book-btn" type="button">
            Learn More
          </button>
        </li>
      `).join("");w.insertAdjacentHTML("beforeend",t)}function Ue(e){return e.filter(t=>t&&t.list_name&&t.list_name.trim()!==""&&t.list_name.trim()!==" "&&t.list_name.toLowerCase()!=="undefined"&&t.list_name.toLowerCase()!=="null")}async function Ke(e){const o=e.filter(n=>n&&n.trim()!==""&&n.trim()!==" "&&n.toLowerCase()!=="undefined"&&n.toLowerCase()!=="null").map(n=>`<li class="dropdown-item"><p>${n}</p></li>`).join("");Ge.insertAdjacentHTML("beforeend",o)}async function Xe(e,t){se.innerHTML="";const o=`<p>Showing ${e} of ${t}</p>`;se.insertAdjacentHTML("beforeend",o)}function Z(){return window.innerWidth>=768?24:10}function Ze(){return X}function et(){X+=1}function tt(){X=1}function he(e){const t=new Set;return e.filter(o=>{if(!o.title||!o.price||parseFloat(o.price)<=0)return!1;const n=o.title.trim().toLowerCase();return t.has(n)?!1:(t.add(n),!0)})}function ot(e){E.length=0,E.push(...e)}const st=()=>ge.classList.remove("is-hidden"),we=()=>ge.classList.add("is-hidden");function nt(){w.innerHTML=""}function rt(){w.innerHTML='<li class="empty-state">No books found</li>'}function it(){w.innerHTML='<li class="error-state">Error loading books</li>'}async function at(){try{const e=await pe(),o=Ue(e).map(async i=>{try{const r=await K(i.list_name),a=he(r);return{name:i.list_name,count:a.length}}catch{return l.error({title:"Error",message:"Error initializing categories",position:"topRight"}),{name:i.list_name,count:0}}}),s=(await Promise.all(o)).filter(i=>i.count>0).map(i=>i.name);Ke(s)}catch{l.error({title:"Error",message:"Error initializing categories",position:"topRight"})}}async function ke(){try{const e=await Je(),t=gt();Xe(t,e)}catch{l.error({title:"Error",message:"Error updating books counter",position:"topRight"})}}function lt(e){e?st():we()}function ct(e){return Array.isArray(e)?e.flatMap(t=>t&&Array.isArray(t.books)?t.books:[]):(l.warning({title:"Warning",message:"Incorrect categories data",position:"topRight"}),[])}function dt(){const e=document.querySelector(".loading-indicator");e&&e.classList.remove("is-hidden")}function ut(){const e=document.querySelector(".loading-indicator");e&&e.classList.add("is-hidden")}function pt(){w.innerHTML=`
    <li class="error-state">
      <p>Failed to load books. Please refresh the page.</p>
      <button onclick="location.reload()" class="retry-btn">Refresh</button>
    </li>
  `}async function mt(){try{dt();const e=await We(),t=ct(e);await fe(t,{isInitialLoad:!0,selectedCategory:Qe,resetContent:!0}),ut()}catch{l.error({title:"Error",message:"App initialization error",position:"topRight"}),pt()}}function bt(e){const t=document.querySelector(e),o=t.querySelector(".dropdown-btn");t.querySelector(".dropdown-menu");const n=t.querySelector(".dropdown-text"),s=t.querySelectorAll(".dropdown-item"),i=t.querySelector(".dropdown-item.selected");i&&(n.textContent=i.textContent),o.onclick=()=>t.classList.toggle("open"),s.forEach(r=>{r.onclick=()=>{s.forEach(a=>a.classList.remove("selected")),r.classList.add("selected"),n.textContent=r.textContent,t.classList.remove("open"),t.dispatchEvent(new CustomEvent("change",{detail:{value:r.dataset.value,text:r.textContent}}))}}),document.onclick=r=>{t.contains(r.target)||t.classList.remove("open")}}document.addEventListener("DOMContentLoaded",mt);bt("#categoryDropdown");document.querySelector("#categoryDropdown").addEventListener("change",e=>{});const ne=document.querySelector(".dropdown-menu"),O=document.querySelector(".show-more-btn"),re=4;let ee=Z();function gt(){return ee}function ft(e){ee=e}async function yt(){O.blur(),et();const e=Ze(),o=Z()+(e-2)*re,n=o+re,s=E.slice(o,n);ee=Math.min(n,E.length),ye(s),await ke();const i=document.querySelector(".top-book-item");if(i){const r=i.getBoundingClientRect().height;window.scrollBy({top:r,behavior:"smooth"})}n>=E.length&&(we(),l.info({message:"You've reached the end of the book list.",position:"topRight"}))}function ht(e){return e&&e.trim()!==""&&e.trim()!==" "&&e.toLowerCase()!=="undefined"&&e.toLowerCase()!=="null"}async function wt(e){const t=e.target.closest(".dropdown-item");if(!t)return;const o=t.textContent.trim();if(!ht(o)){l.warning({title:"Warning",message:"Invalid category selected",position:"topRight"});return}const n=document.querySelector(".dropdown-btn .dropdown-text");n&&(n.textContent=o);let s;o==="All categories"?s=await be():s=await K(o),await fe(s,{selectedCategory:o,resetContent:!0}),document.querySelector("#categoryDropdown").classList.remove("open")}O&&O.addEventListener("click",yt);ne&&ne.addEventListener("click",wt);const N=document.querySelector(".scroll-up");window.addEventListener("scroll",()=>{window.scrollY>800?N.classList.add("visible"):N.classList.remove("visible")});N.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".footer-form"),t=document.querySelector(".footer-form-input");e.addEventListener("submit",function(n){n.preventDefault();const s=t.value.trim();if(s===""){t.classList.add("error"),l.error({title:"Error",message:"Email field cannot be empty",position:"topRight",timeout:4e3});return}if(t.value=s,!t.checkValidity()){t.classList.add("error");let r="Please enter a valid email address";t.validity.valueMissing?r="Email field cannot be empty":t.validity.typeMismatch?r="Please enter a valid email format (example@domain.com)":t.validity.patternMismatch&&(r="Email format not supported. Use simple format like name@domain.com"),l.error({title:"Error",message:r,position:"topRight",timeout:4e3});return}if((JSON.parse(localStorage.getItem("subscribedEmails"))||[]).some(r=>r.email===s)){t.classList.add("error"),l.warning({title:"Warning",message:"You are already subscribed with this email address",position:"topRight",timeout:4e3});return}o(s),t.value="",l.success({title:"Success!",message:"Thank you! Your email has been successfully submitted.",position:"topRight",timeout:4e3,theme:"light"})}),t.addEventListener("input",function(){this.classList.remove("error")});function o(n){let s=JSON.parse(localStorage.getItem("subscribedEmails"))||[];s.push({email:n}),localStorage.setItem("subscribedEmails",JSON.stringify(s))}});const[kt,vt]=document.querySelectorAll(".cart-open-link"),[v,L]=document.querySelectorAll(".cart-badge"),I=document.querySelector(".js-backdrop-cart"),Lt=document.querySelector(".js-close-btn-cart"),b=document.querySelector("#cart-list"),p="stored-cart-booksy";let c=[],_,ie;const ve='<div style="text-align:center;margin:auto;" id="cart-total">Your cart is empty</div>';window.addEventListener("DOMContentLoaded",()=>{c=Tt(p)??[],y(c.reduce((e,t)=>e+=t.quantity,0))});const Le=e=>{console.log("e",e),e.preventDefault(),Et(),It(c)};kt.addEventListener("click",Le);vt.addEventListener("click",Le);function Et(){I.classList.add("is-open"),document.querySelector("body").classList.add("no-scroll")}function B(){I.classList.remove("is-open"),document.querySelector("body").classList.remove("no-scroll");const t=b.nextElementSibling;setTimeout(()=>{t.remove()},300)}function St(e){const t=e.target;if(!t.classList.contains("js-qty-input"))return;const o=t.closest("li"),n=o.dataset.id,s=Ee(n);if(!s)return;const i=o.querySelector(".quantity"),r=o.querySelector(".total-price");let a=Number(t.value);(isNaN(a)||a<1)&&(a=1),s.quantity=a,i.textContent=`q-ty: ${a}`,r.textContent=`total: ${(parseFloat(s.book.price)*a).toFixed(2)}`,t.value=a,h(p,c),y(c.reduce((M,x)=>M+x.quantity,0)),j()}function Ct(e){const t=e.target;if(console.log("btn",t),t.classList.contains("continue")){xe();return}if(t.classList.contains("buy")){Ce();return}const o=t.closest("li");if(!o)return;const n=o.dataset.id,s=Ee(n);if(!s)return;const i=o.querySelector(".quantity"),r=o.querySelector(".total-price"),a=o.querySelector(".js-qty-input"),M=parseFloat(s.book.price);t.classList.contains("decrease")&&s.quantity>1&&(s.quantity-=1,e.target.blur(),x()),t.classList.contains("increase")&&(s.quantity+=1,e.target.blur(),x()),t.classList.contains("js-remove-book")&&qe();function x(){const k=s.quantity;i.textContent=`q-ty: ${k}`,r.textContent=`total: ${(M*k).toFixed(2)}$`,a.value=k,y(c.reduce((A,R)=>A+R.quantity,0)),h(p,c),j()}function Ce(){Bt(),B(),l.success({title:"Hello",message:"Thank you for your purchase!",position:"topRight"})}function xe(){B()}function qe(){const{success:k}=$t(n);k?(y(c.reduce((A,R)=>A+R.quantity,0)),o.remove(),h(p,c),j()):console.warn("Woops")}}const xt=e=>{B()};Lt.addEventListener("click",xt);I.addEventListener("click",e=>{e.target===e.currentTarget&&B()});function Ee(e){return c.find(o=>o.book._id===e)}function qt(e,t=1){const o=e._id,n=c.findIndex(i=>i.book._id===o);if(n===-1){const i={quantity:t,book:e};c.push(i)}else c[n].quantity+=t;const s=c.reduce((i,r)=>i+=r.quantity,0);y(s),h(p,c)}function $t(e){const t=c.findIndex(o=>o.book._id===e);return t<0?{success:!1}:(c.splice(t,1),h(p,c),{success:!0})}function y(e){const t=v.classList.contains("visually-hidden"),o=L.classList.contains("visually-hidden");if(!e){v.textContent="",L.textContent="",t||v.classList.add("visually-hidden"),o||L.classList.add("visually-hidden");return}const n=e>99?"99+":e;v.textContent=n,L.textContent=n,t&&v.classList.remove("visually-hidden"),o&&L.classList.remove("visually-hidden")}function Bt(){c=[],h(p,[]),y(0)}function Tt(e){const t=localStorage.getItem(e);return t?JSON.parse(t):null}function h(e,t){localStorage.setItem(e,typeof t=="string"?t:JSON.stringify(t))}function It(e){function t(s){return s.map(i=>{const{book:r,quantity:a}=i;return`<li class="cart-item-inner" data-id="${r._id}">
        <div class="purchase-item-content">
                  <div class="purchase-item-head">
                  <p>${r.title}</p>
                    <img class="cart-item-img" src="${r.book_image}" alt="${r.title}" />
                  </div>

                  </div>
                  <div class="enter-value">
                  <div>
                    <p>price: ${parseFloat(r.price).toFixed(2)}$</p>
                    <p class="quantity">q-ty: ${a}</p>
                    <p class="total-price">total: ${(parseFloat(r.price)*a).toFixed(2)}$</p>
                  </div>
                    <div class="qty-group">
                      <button class="enter-value-btn decrease">-</button>
                      <input min="1" class="js-qty-input qty-input" value="${a}" />
                      <button class="enter-value-btn increase">+</button>
                    </div>
                    <button class="js-remove-book remove-book">remove</button>
                  </div>
                </li>`}).join("")}function o(){const s=e.reduce((r,a)=>r+=a.quantity*parseFloat(a.book.price),0).toFixed(2),i=e.reduce((r,a)=>r+=a.quantity,0);return!parseInt(s)||!i?ve:` <div class="cart-total" id="cart-total">
              <ul>
                <li>
                <p id="cart-total-price">Total: ${s}$</p>
                <p id="cart-total-qty">Amount: ${i}</p>
                </li>
              </ul>
              <ul class="total-buttons">
                <li><button class="remove-book continue">Keep shopping</button></li>
                <li><button class="remove-book buy">BUY</button></li>
              </ul>
            </div>`}b.innerHTML=t(e),b.insertAdjacentHTML("afterend",o());const n=b.nextElementSibling;_=Ct,ie=St,n.addEventListener("click",_),b.addEventListener("click",_),b.addEventListener("input",ie)}function j(){const e=I.querySelector("#cart-total"),t=e.querySelector("#cart-total-price"),o=e.querySelector("#cart-total-qty"),n=c.reduce((i,r)=>i+=r.quantity*parseFloat(r.book.price),0).toFixed(2),s=c.reduce((i,r)=>i+=r.quantity,0);if(!parseInt(n)||!s){e.innerHTML=ve;return}t.textContent=`Total: ${n}$`,o.textContent=`Amount: ${s}`}const Mt=new Be("#accordion",{showMultiple:!0}),At=document.querySelector("#text-wrap-modal-books"),Se=document.querySelector("#accordion"),m=document.querySelector("#modal-books"),Rt=document.querySelector("#book-modal-form"),Pt=document.querySelector("#cart-button"),z=m.querySelector("#dynamic-text");let q;const te=document.querySelector("#quantity-wrapper"),Ft=te.children[0],d=te.children[1],Ht=te.children[2];let _t=0,ae;const Dt=async e=>{if(e.target.classList.contains("top-book-btn"))if(m.classList.add("books-window-is-open"),f.classList.add("no-scroll"),d.value=1,q=e.target.closest("li").id,q)try{const o=await me(q);jt(o)}catch(o){l.error({title:"Error",message:`Failed to fetch book data: ${o}`,position:"topRight"})}else l.error({title:"Error",message:"Book ID not found",position:"topRight"}),m.classList.remove("books-window-is-open"),f.classList.remove("no-scroll")};w.addEventListener("click",Dt);const Ot=()=>{const e=Se.querySelector(".ac-dynamic");e&&e.remove();const t=m.querySelector(".books-modal-image");t&&t.remove(),z&&(z.innerHTML="")},Nt=e=>e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),jt=({title:e,description:t,author:o,book_image:n,book_image_width:s,book_image_height:i,price:r})=>{Ot(),t===""&&(t="There is no description for this book.");const a=Nt(e);At.insertAdjacentHTML("beforebegin",`<img class="books-modal-image" loading="lazy" src="${n}" width="${s}" height="${i}" alt="${a}">`),z.insertAdjacentHTML("afterbegin",`<h2 class="book-title-modal">${a}</h2>
     <h3 class="book-author-modal">${o}</h3>
     <h3 class="book-price">$${r}</h3>`),Se.insertAdjacentHTML("afterbegin",`<div class="ac ac-dynamic">
        <h2 class="ac-header">
          <button type="button" class="ac-trigger">Details
            <span class="chevron-span">
              <svg class="icon-chevron" width="24" height="25">
                <use
                  class="chevron-use"
                  href="./img/icons.svg#icon-chevron-down"
                ></use>
              </svg>
            </span></button>
        </h2>
        <div class="ac-panel">
          <p class="ac-text">
            ${t}
          </p>
        </div>
      </div>`),Mt.update()},zt=e=>{e.target.blur(),d.value=Number(d.value)+1},Vt=e=>{e.target.blur(),Number(d.value)!=1&&(d.value=Number(d.value)-1)};Ht.addEventListener("click",zt);Ft.addEventListener("click",Vt);const Wt=e=>{e.target.blur(),_t+=Number(d.value),ae=q,me(ae).then(t=>{t?qt(t,Number(d.value)):l.error({title:"Error",message:"Failed to add book to the cart!",position:"topRight"})}).catch(console.error),l.info({title:"Hello",message:`Successfully added ${d.value} item(s) to the cart!`,position:"topRight"})};Pt.addEventListener("click",Wt);const Gt=e=>{e.preventDefault(),e.target.blur(),l.success({title:"Hello",message:"Thank you for your purchase!",position:"topRight"})};Rt.addEventListener("submit",Gt);const Yt=e=>{(e.target.classList.contains("mob-books-close")||e.target.classList.contains("modal-window-books-backdrop")||e.target.classList.contains("buy-button"))&&(m.classList.remove("books-window-is-open"),f.classList.remove("no-scroll"))},Qt=e=>{e.key==="Escape"&&(m.classList.remove("books-window-is-open"),f.classList.remove("no-scroll"))};document.addEventListener("keydown",Qt);m.addEventListener("click",Yt);
//# sourceMappingURL=index.js.map
