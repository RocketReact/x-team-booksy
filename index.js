import{S as V,N as W,P as G,i as l,K as ce,A as Te,a as C,b as Me}from"./assets/vendor-cle4eI2j.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{new V(".events-swiper",{modules:[W,G],wrapperClass:"events-swiper-wrapper",slideClass:"events-swiper-slide",loop:!1,spaceBetween:20,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".events-swiper-button-next",prevEl:".events-swiper-button-prev",disabledClass:"events-swiper-button-disabled"},pagination:{el:".events-swiper-pagination",clickable:!0}}),document.querySelectorAll(".events-item-time").forEach(t=>{t.textContent=Ae()})});function Ae(e=30){const t=new Date,o=new Date(t.getTime()+Math.random()*e*24*60*60*1e3),r={month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return` | ${o.toLocaleString("en-US",r)}`}const Y=document.getElementById("modal"),$=document.getElementById("modalBackdrop"),Re=document.getElementById("modalClose"),S=document.getElementById("registerForm"),Q="register-form-data",g=S.elements.name,u=S.elements.email,J=S.elements.message;function Pe(e){return/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)}function de(){const e={name:g.value.trim(),email:u.value.trim(),message:J.value.trim()};localStorage.setItem(Q,JSON.stringify(e))}function He(){const e=localStorage.getItem(Q);if(e)try{const t=JSON.parse(e);t.name&&(g.value=t.name),t.email&&(u.value=t.email),t.message&&(J.value=t.message)}catch{l.error({title:"Error",message:"Failed to restore saved data.",position:"topRight"})}}function Fe(){localStorage.removeItem(Q)}const De=document.querySelectorAll(".open-modal-btn"),_e=Y.querySelector(".modal-subtitle");De.forEach(e=>{e.addEventListener("click",t=>{const o=e.dataset.subtitle||"";_e.textContent=o,Oe()})});function Oe(){Y.style.display="block",$.style.display="block",document.body.classList.add("modal-open"),He()}function I(){Y.style.display="none",$.style.display="none",document.body.classList.remove("modal-open")}Re.addEventListener("click",I);$.addEventListener("click",e=>{e.target===$&&I()});document.addEventListener("keydown",e=>{e.key==="Escape"&&I()});[g,u,J].forEach(e=>{e.addEventListener("input",de)});S.addEventListener("submit",e=>{e.preventDefault();const t=g.value.trim(),o=u.value.trim();[g,u].forEach(s=>{s.addEventListener("input",()=>{s.classList.remove("error"),de()})});let r=!1;if((!t||!o)&&(l.warning({title:"Warning",message:"Please fill out required fields: Name and Email",position:"topRight"}),t||g.classList.add("error"),o||u.classList.add("error"),r=!0),o&&!Pe(o)&&(l.error({title:"Invalid Email",message:"Please enter a valid email format (example@domain.com)",position:"topRight"}),u.classList.add("error"),r=!0),!r)try{if(o==="error@example.com")throw new Error("Simulated server error");l.success({title:"Success",message:"Form submitted!",position:"topRight"}),S.reset(),Fe(),I()}catch(s){l.error({title:"Error",message:`Something went wrong: ${s.message}`,position:"topRight"})}});const _=document.querySelector("#burger-button"),U=document.querySelector("#mobile_menu"),oe=document.querySelector("#nav-links"),f=document.body,Ne=e=>{U.classList.add("mob-menu-open"),f.classList.add("no-scroll")},je=e=>{const t=e.target.closest("button"),o=e.target.closest(".nav-list-mob-link");(t||o)&&(U.classList.remove("mob-menu-open"),f.classList.remove("no-scroll"))},ue=()=>{window.innerWidth>=768?(oe.classList.remove("visually-hidden"),_.classList.add("visually-hidden")):(_.classList.remove("visually-hidden"),oe.classList.add("visually-hidden"))};ue();_.addEventListener("click",Ne);U.addEventListener("click",je);window.addEventListener("resize",ue);window.addEventListener("scroll",e=>{const t=document.querySelector(".header"),o=document.querySelector(".cart-badge");window.scrollY>50?(t.classList.add("scrolled-header"),o.classList.add("scrolled-badge")):(t.classList.remove("scrolled-header"),o.classList.remove("scrolled-badge"))});const ze=new V(".swiper-feedback",{modules:[W,G,ce],wrapperClass:"swiper-wrapper-feedback",slideClass:"swiper-slide-feedback",loop:!1,direction:"horizontal",slidesPerView:1,slidesPerGroup:1,centeredSlides:!1,simulateTouch:!0,touchRatio:1,grabCursor:!0,watchOverflow:!0,speed:250,spaceBetween:24,lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},pagination:{el:".custom-swiper-pagination",type:"bullets",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:".feedback-custom-swiper-button-next",prevEl:".feedback-custom-swiper-button-prev",disabledClass:"feedback-custom-swiper-button-disabled"},keyboard:{enabled:!0,onlyInViewport:!0}});function Ve(){const e=window.innerWidth;return e>=1440?3:e>=768?2:1}function pe(){const e=ze.slides.length,t=Ve(),o=document.querySelector(".custom-swiper-pagination"),r=document.querySelector(".feedback-custom-swiper-button-prev"),s=document.querySelector(".feedback-custom-swiper-button-next");e<=t?(o&&(o.style.display="none"),r&&(r.style.display="none"),s&&(s.style.display="none")):(o&&(o.style.display=""),r&&(r.style.display=""),s&&(s.style.display=""))}pe();window.addEventListener("resize",()=>{pe()});new V(".hero-swiper",{modules:[W,G,Te,ce],direction:"horizontal",loop:!1,spaceBetween:16,grabCursor:!0,autoplay:{delay:2500,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-swiper-button-next",prevEl:".hero-swiper-button-prev"},on:{slideChange(e){const t=document.querySelector(".hero-swiper-button-next"),o=document.querySelector(".hero-swiper-button-prev");e.isEnd?t==null||t.classList.add("is-disabled"):t==null||t.classList.remove("is-disabled"),e.isBeginning?o==null||o.classList.add("is-disabled"):o==null||o.classList.remove("is-disabled")},init(e){const t=document.querySelector(".hero-swiper-button-prev");e.isBeginning?t==null||t.classList.add("is-disabled"):t==null||t.classList.remove("is-disabled")}}});document.querySelectorAll(".hero-swiper-button-prev, .hero-swiper-button-next").forEach(e=>{e.addEventListener("mouseup",()=>{e.blur()})});const We=[{alt:"Mug with book on the table",text:"Get 10% off your ",highlight:"first order",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-1-desktop.webp",src2x:"./img/desktop-webp/banner-1-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-1-tablet.webp",src2x:"./img/tablet-webp/banner-1-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-1-mob.webp",src2x:"./img/mob-webp/banner-1-mob@2x.webp"}}},{alt:"Glasses with book on the table",text:"Save 15% on ",highlight:"some books",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-2-desktop.webp",src2x:"./img/desktop-webp/banner-2-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-2-tablet.webp",src2x:"./img/tablet-webp/banner-2-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-2-mob.webp",src2x:"./img/mob-webp/banner-2-mob@2x.webp"}}},{alt:"Shelf with books",text:"Summer Sale! ",highlight:"Up to -40% discounts",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-3-desktop.webp",src2x:"./img/desktop-webp/banner-3-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-3-tablet.webp",src2x:"./img/tablet-webp/banner-3-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-3-mob.webp",src2x:"./img/mob-webp/banner-3-mob@2x.webp"}}},{alt:"Vase on the table",text:"Last chance to buy our ",highlight:"spring bestsellers",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-4-desktop.webp",src2x:"./img/desktop-webp/banner-4-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-4-tablet.webp",src2x:"./img/tablet-webp/banner-4-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-4-mob.webp",src2x:"./img/mob-webp/banner-4-mob@2x.webp"}}}],Ge=document.querySelector(".hero-js"),Ye=e=>e.map(t=>`<li class="swiper-slide hero-swiper-slide">
      <picture>
      <source media="(min-width: 1440px)" type="image/webp" srcset="${t.images.desktop.src} 1x, ${t.images.desktop.src2x} 2x">
      <source media="(min-width: 768px)" type="image/webp" srcset="${t.images.tablet.src} 1x, ${t.images.tablet.src2x} 2x">
          <img 
            src="${t.images.mobile.src}" 
            srcset="${t.images.mobile.src} 1x, ${t.images.mobile.src2x} 2x"
            loading="lazy"
            width="343"
            height="199"
            alt="${t.alt}" />
          </picture>
          <div class="banner-wrapper">
            <p class="hero-text">
              ${t.text}<span class="hero-text-wrap">${t.highlight}</span>
            </p>
            <a class="hero-link" href="#books-section">Shop Now!</a>
          </div>
        </li>`).join(""),Qe=e=>{Ge.innerHTML=Ye(e)};Qe(We);C.defaults.baseURL="https://books-backend.p.goit.global/books/";let P=null,H=null;async function me(){if(P!==null)return P;try{const t=(await C.get("category-list")).data.filter(o=>o&&o.list_name&&o.list_name.trim()!==""&&o.list_name.trim()!==" ");return P=t,t}catch{return l.error({title:"Error",message:"Failed to load categories",position:"topRight"}),[]}}async function Je(){try{return(await C.get("top-books")).data}catch{return l.error({title:"Error",message:"Failed to load top books",position:"topRight"}),[]}}async function K(e){try{const t=encodeURIComponent(e);return(await C.get(`category?category=${t}`)).data}catch{return l.error({title:"Error",message:`Failed to load books for category: ${e}`,position:"topRight"}),[]}}async function be(e){try{return(await C.get(e)).data}catch{return l.error({title:"Error",message:"Failed to load book details",position:"topRight"}),[]}}async function ge(){if(H!==null)return H;try{const e=await me();if(!e||!Array.isArray(e))return[];const t=e.filter(n=>n.list_name).map(n=>n.list_name),r=(await Promise.all(t.map(K))).flat(),s=new Set,i=r.filter(n=>{if(!n.title||!n.price||parseFloat(n.price)<=0)return!1;const a=n.title.trim().toLowerCase();return s.has(a)?!1:(s.add(a),!0)});return H=i,i}catch{return l.error({title:"Error",message:"Failed to load all books",position:"topRight"}),[]}}const w=document.querySelector(".top-books-list"),Ue=document.querySelector(".dropdown-menu"),fe=document.querySelector(".show-more-btn"),se=document.querySelector(".show-count"),ye=document.querySelector(".desk-books-nav-wrapper"),he=document.querySelector(".book-loader");document.querySelector(".loader");let E=[],Z=1,Ke="All categories";const Ze="Top";let F=null;async function Xe(){return F===null&&(F=(await ge()).length),F}async function we(e,t={}){const{isInitialLoad:o=!1,selectedCategory:r="All categories",resetContent:s=!0}=t;try{if(s&&(lt(),rt()),!Array.isArray(e)){l.warning({title:"Warning",message:"displayBooks: books should be an array",position:"topRight"});return}const i=ke(e);it(i),Ke=r;const n=X(),a=i.slice(0,n);Lt(a.length),a.length>0?ve(a):ct(),o&&await ut(),await Ee(),pt(i.length>n)}catch{l.error({title:"Error",message:"Error in displayBooks function",position:"topRight"}),dt()}}function ve(e){const t=e.map(o=>`
        <li class="top-book-item" id="${o._id}">
            <img
              class="top-book-img"
              src="${o.book_image}"
              alt="${o.title}"
              width="343" height="488"
              loading="lazy"
            />
          <div class="top-book-info">
          <div class="top-book-info-wrap">
            <h3 class="top-book-title">${o.title.toLowerCase()}</h3>
            <p class="top-book-price">$${o.price}</p>
            </div>
            <p class="top-book-author">${o.author.toLowerCase()}</p>
          </div>
          <button class="top-book-btn" type="button">
            Learn More
          </button>
        </li>
      `).join("");w.insertAdjacentHTML("beforeend",t)}function et(e){return e.filter(t=>t&&t.list_name&&t.list_name.trim()!==""&&t.list_name.trim()!==" "&&t.list_name.toLowerCase()!=="undefined"&&t.list_name.toLowerCase()!=="null")}async function tt(e){const o=e.filter(r=>r&&r.trim()!==""&&r.trim()!==" "&&r.toLowerCase()!=="undefined"&&r.toLowerCase()!=="null").map(r=>`<li class="dropdown-item"><p>${r}</p></li>`).join("");Ue.insertAdjacentHTML("beforeend",o)}async function ot(e,t){se.innerHTML="";const o=`<p>Showing ${e} of ${t}</p>`;se.insertAdjacentHTML("beforeend",o)}function X(){return window.innerWidth>=768?24:10}function st(){return Z}function nt(){Z+=1}function rt(){Z=1}function ke(e){const t=new Set;return e.filter(o=>{if(!o.title||!o.price||parseFloat(o.price)<=0)return!1;const r=o.title.trim().toLowerCase();return t.has(r)?!1:(t.add(r),!0)})}function it(e){E.length=0,E.push(...e)}const at=()=>fe.classList.remove("is-hidden"),Le=()=>fe.classList.add("is-hidden");function lt(){w.innerHTML=""}function ct(){w.innerHTML='<li class="empty-state">No books found</li>'}function dt(){w.innerHTML='<li class="error-state">Error loading books</li>'}async function ut(){try{const e=await me(),o=et(e).map(async i=>{try{const n=await K(i.list_name),a=ke(n);return{name:i.list_name,count:a.length}}catch{return l.error({title:"Error",message:"Error initializing categories",position:"topRight"}),{name:i.list_name,count:0}}}),s=(await Promise.all(o)).filter(i=>i.count>0).map(i=>i.name);tt(s)}catch{l.error({title:"Error",message:"Error initializing categories",position:"topRight"})}bt()}async function Ee(){try{const e=await Xe(),t=kt();ot(t,e)}catch{l.error({title:"Error",message:"Error updating books counter",position:"topRight"})}}function pt(e){e?at():Le()}function mt(){he.classList.remove("visually-hidden"),ye.classList.add("visually-hidden")}function bt(){he.classList.add("visually-hidden"),ye.classList.remove("visually-hidden")}function gt(e){return Array.isArray(e)?e.flatMap(t=>t&&Array.isArray(t.books)?t.books:[]):(l.warning({title:"Warning",message:"Incorrect categories data",position:"topRight"}),[])}function ft(){const e=document.querySelector(".loading-indicator");e&&e.classList.remove("is-hidden")}function yt(){const e=document.querySelector(".loading-indicator");e&&e.classList.add("is-hidden")}function ht(){w.innerHTML=`
    <li class="error-state">
      <p>Failed to load books. Please refresh the page.</p>
      <button onclick="location.reload()" class="retry-btn">Refresh</button>
    </li>
  `}async function wt(){try{ft();const e=await Je(),t=gt(e);await we(t,{isInitialLoad:!0,selectedCategory:Ze,resetContent:!0}),yt()}catch{l.error({title:"Error",message:"App initialization error",position:"topRight"}),ht()}}function vt(e){const t=document.querySelector(e),o=t.querySelector(".dropdown-btn");t.querySelector(".dropdown-menu");const r=t.querySelector(".dropdown-text"),s=t.querySelectorAll(".dropdown-item"),i=t.querySelector(".dropdown-item.selected");i&&(r.textContent=i.textContent),o.onclick=()=>t.classList.toggle("open"),s.forEach(n=>{n.onclick=()=>{s.forEach(a=>a.classList.remove("selected")),n.classList.add("selected"),r.textContent=n.textContent,t.classList.remove("open"),t.dispatchEvent(new CustomEvent("change",{detail:{value:n.dataset.value,text:n.textContent}}))}}),document.onclick=n=>{t.contains(n.target)||t.classList.remove("open")}}document.addEventListener("DOMContentLoaded",wt);vt("#categoryDropdown");document.querySelector("#categoryDropdown").addEventListener("change",e=>{});const ne=document.querySelector(".dropdown-menu"),O=document.querySelector(".show-more-btn"),re=4;let ee=X();function kt(){return ee}function Lt(e){ee=e}async function Et(){O.blur(),nt();const e=st(),o=X()+(e-2)*re,r=o+re,s=E.slice(o,r);ee=Math.min(r,E.length),ve(s),await Ee();const i=document.querySelector(".top-book-item");if(i){const n=i.getBoundingClientRect().height;window.scrollBy({top:n,behavior:"smooth"})}r>=E.length&&(Le(),l.info({message:"You've reached the end of the book list.",position:"topRight"}))}function St(e){return e&&e.trim()!==""&&e.trim()!==" "&&e.toLowerCase()!=="undefined"&&e.toLowerCase()!=="null"}async function Ct(e){const t=e.target.closest(".dropdown-item");if(!t)return;const o=t.textContent.trim();if(!St(o)){l.warning({title:"Warning",message:"Invalid category selected",position:"topRight"});return}document.querySelectorAll(".dropdown-item").forEach(a=>{a.classList.remove("selected")}),t.classList.add("selected");const s=document.querySelector(".dropdown-btn .dropdown-text");s&&(s.textContent=o);let i;o==="All categories"?i=await ge():i=await K(o),await we(i,{selectedCategory:o,resetContent:!0}),document.querySelector("#categoryDropdown").classList.remove("open")}document.addEventListener("DOMContentLoaded",mt);O&&O.addEventListener("click",Et);ne&&ne.addEventListener("click",Ct);const N=document.querySelector(".scroll-up");window.addEventListener("scroll",()=>{window.scrollY>800?N.classList.add("visible"):N.classList.remove("visible")});N.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".footer-form"),t=document.querySelector(".footer-form-input");e.addEventListener("submit",function(r){r.preventDefault();const s=t.value.trim();if(s===""){t.classList.add("error"),l.error({title:"Error",message:"Email field cannot be empty",position:"topRight",timeout:4e3});return}if(t.value=s,!t.checkValidity()){t.classList.add("error");let n="Please enter a valid email address";t.validity.valueMissing?n="Email field cannot be empty":t.validity.typeMismatch?n="Please enter a valid email format (example@domain.com)":t.validity.patternMismatch&&(n="Email format not supported. Use simple format like name@domain.com"),l.error({title:"Error",message:n,position:"topRight",timeout:4e3});return}if((JSON.parse(localStorage.getItem("subscribedEmails"))||[]).some(n=>n.email===s)){t.classList.add("error"),l.warning({title:"Warning",message:"You are already subscribed with this email address",position:"topRight",timeout:4e3});return}o(s),t.value="",l.success({title:"Success!",message:"Thank you! Your email has been successfully submitted.",position:"topRight",timeout:4e3,theme:"light"})}),t.addEventListener("input",function(){this.classList.remove("error")});function o(r){let s=JSON.parse(localStorage.getItem("subscribedEmails"))||[];s.push({email:r}),localStorage.setItem("subscribedEmails",JSON.stringify(s))}});const[xt,qt]=document.querySelectorAll(".cart-open-link"),[k,L]=document.querySelectorAll(".cart-badge"),T=document.querySelector(".js-backdrop-cart"),$t=document.querySelector(".js-close-btn-cart"),b=document.querySelector("#cart-list"),ie=document.querySelector("body"),Bt=document.querySelector("#mobile_menu"),p="stored-cart-booksy";let c=[],D,ae;const Se='<div style="text-align:center;margin:auto;" id="cart-total">Your cart is empty</div>';window.addEventListener("DOMContentLoaded",()=>{c=Ft(p)??[],y(c.reduce((e,t)=>e+=t.quantity,0))});const Ce=e=>{e.preventDefault(),e.stopPropagation(),It(),Dt(c)};xt.addEventListener("click",Ce);qt.addEventListener("click",Ce);function It(){T.classList.add("is-open"),window.innerWidth<768&&(Bt.classList.remove("mob-menu-open"),ie.classList.remove("no-scroll")),ie.classList.add("no-scroll")}function B(){T.classList.remove("is-open"),document.querySelector("body").classList.remove("no-scroll");const t=b.nextElementSibling;setTimeout(()=>{t.remove()},300)}function Tt(e){const t=e.target;if(!t.classList.contains("js-qty-input"))return;const o=t.closest("li"),r=o.dataset.id,s=xe(r);if(!s)return;const i=o.querySelector(".quantity"),n=o.querySelector(".total-price");let a=Number(t.value);(isNaN(a)||a<1)&&(a=1),s.quantity=a,i.textContent=`q-ty: ${a}`,n.textContent=`total: ${(parseFloat(s.book.price)*a).toFixed(2)}`,t.value=a,h(p,c),y(c.reduce((M,x)=>M+x.quantity,0)),j()}function Mt(e){const t=e.target;if(t.classList.contains("continue")){Be();return}if(t.classList.contains("buy")){$e();return}const o=t.closest("li");if(!o)return;const r=o.dataset.id,s=xe(r);if(!s)return;const i=o.querySelector(".quantity"),n=o.querySelector(".total-price"),a=o.querySelector(".js-qty-input"),M=parseFloat(s.book.price);t.classList.contains("decrease")&&s.quantity>1&&(s.quantity-=1,e.target.blur(),x()),t.classList.contains("increase")&&(s.quantity+=1,e.target.blur(),x()),t.classList.contains("js-remove-book")&&Ie();function x(){const v=s.quantity;i.textContent=`q-ty: ${v}`,n.textContent=`total: ${(M*v).toFixed(2)}$`,a.value=v,y(c.reduce((A,R)=>A+R.quantity,0)),h(p,c),j()}function $e(){Ht(),B(),l.success({title:"Hello",message:"Thank you for your purchase!",position:"topRight"})}function Be(){B()}function Ie(){const{success:v}=Pt(r);v?(y(c.reduce((A,R)=>A+R.quantity,0)),o.remove(),h(p,c),j()):console.warn("Woops")}}const At=e=>{B()};$t.addEventListener("click",At);T.addEventListener("click",e=>{e.target===e.currentTarget&&B()});function xe(e){return c.find(o=>o.book._id===e)}function Rt(e,t=1){const o=e._id,r=c.findIndex(i=>i.book._id===o);if(r===-1){const i={quantity:t,book:e};c.push(i)}else c[r].quantity+=t;const s=c.reduce((i,n)=>i+=n.quantity,0);y(s),h(p,c)}function Pt(e){const t=c.findIndex(o=>o.book._id===e);return t<0?{success:!1}:(c.splice(t,1),h(p,c),{success:!0})}function y(e){const t=k.classList.contains("visually-hidden"),o=L.classList.contains("visually-hidden");if(!e){k.textContent="",L.textContent="",t||k.classList.add("visually-hidden"),o||L.classList.add("visually-hidden");return}const r=e>99?"99+":e;k.textContent=r,L.textContent=r,t&&k.classList.remove("visually-hidden"),o&&L.classList.remove("visually-hidden")}function Ht(){c=[],h(p,[]),y(0)}function Ft(e){const t=localStorage.getItem(e);return t?JSON.parse(t):null}function h(e,t){localStorage.setItem(e,typeof t=="string"?t:JSON.stringify(t))}function Dt(e){function t(s){return s.map(i=>{const{book:n,quantity:a}=i;return`<li class="cart-item-inner" data-id="${n._id}">
        <div class="purchase-item-content">
                  <div class="purchase-item-head">
                  <p>${n.title}</p>
                    <img class="cart-item-img" src="${n.book_image}" alt="${n.title}" />
                  </div>

                  </div>
                  <div class="enter-value">
                  <div>
                    <p>price: ${parseFloat(n.price).toFixed(2)}$</p>
                    <p class="quantity">q-ty: ${a}</p>
                    <p class="total-price">total: ${(parseFloat(n.price)*a).toFixed(2)}$</p>
                  </div>
                    <div class="qty-group">
                      <button class="enter-value-btn decrease">-</button>
                      <input min="1" class="js-qty-input qty-input" value="${a}" />
                      <button class="enter-value-btn increase">+</button>
                    </div>
                    <button class="js-remove-book remove-book">remove</button>
                  </div>
                </li>`}).join("")}function o(){const s=e.reduce((n,a)=>n+=a.quantity*parseFloat(a.book.price),0).toFixed(2),i=e.reduce((n,a)=>n+=a.quantity,0);return!parseInt(s)||!i?Se:` <div class="cart-total" id="cart-total">
              <ul>
                <li>
                <p id="cart-total-price">Total: ${s}$</p>
                <p id="cart-total-qty">Amount: ${i}</p>
                </li>
              </ul>
              <ul class="total-buttons">
                <li><button class="remove-book continue">Keep shopping</button></li>
                <li><button class="remove-book buy">BUY</button></li>
              </ul>
            </div>`}b.innerHTML=t(e),b.insertAdjacentHTML("afterend",o());const r=b.nextElementSibling;D=Mt,ae=Tt,r.addEventListener("click",D),b.addEventListener("click",D),b.addEventListener("input",ae)}function j(){const e=T.querySelector("#cart-total"),t=e.querySelector("#cart-total-price"),o=e.querySelector("#cart-total-qty"),r=c.reduce((i,n)=>i+=n.quantity*parseFloat(n.book.price),0).toFixed(2),s=c.reduce((i,n)=>i+=n.quantity,0);if(!parseInt(r)||!s){e.innerHTML=Se;return}t.textContent=`Total: ${r}$`,o.textContent=`Amount: ${s}`}const _t=new Me("#accordion",{showMultiple:!0}),Ot=document.querySelector("#text-wrap-modal-books"),qe=document.querySelector("#accordion"),m=document.querySelector("#modal-books"),Nt=document.querySelector("#book-modal-form"),jt=document.querySelector("#cart-button"),z=m.querySelector("#dynamic-text");let q;const te=document.querySelector("#quantity-wrapper"),zt=te.children[0],d=te.children[1],Vt=te.children[2];let Wt=0,le;const Gt=async e=>{if(e.target.classList.contains("top-book-btn"))if(m.classList.add("books-window-is-open"),f.classList.add("no-scroll"),d.value=1,q=e.target.closest("li").id,q)try{const o=await be(q);Jt(o)}catch(o){l.error({title:"Error",message:`Failed to fetch book data: ${o}`,position:"topRight"})}else l.error({title:"Error",message:"Book ID not found",position:"topRight"}),m.classList.remove("books-window-is-open"),f.classList.remove("no-scroll")};w.addEventListener("click",Gt);const Yt=()=>{const e=qe.querySelector(".ac-dynamic");e&&e.remove();const t=m.querySelector(".books-modal-image");t&&t.remove(),z&&(z.innerHTML="")},Qt=e=>e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),Jt=({title:e,description:t,author:o,book_image:r,book_image_width:s,book_image_height:i,price:n})=>{Yt(),t===""&&(t="There is no description for this book.");const a=Qt(e);Ot.insertAdjacentHTML("beforebegin",`<img class="books-modal-image" loading="lazy" src="${r}" width="${s}" height="${i}" alt="${a}">`),z.insertAdjacentHTML("afterbegin",`<h2 class="book-title-modal">${a}</h2>
     <h3 class="book-author-modal">${o}</h3>
     <h3 class="book-price">$${n}</h3>`),qe.insertAdjacentHTML("afterbegin",`<div class="ac ac-dynamic">
        <h2 class="ac-header">
          <button type="button" class="ac-trigger">Details
            <span class="chevron-span">
              <svg class="icon-chevron" width="24" height="25">
                <use
                  class="chevron-use"
                  href="./img/icons.svg#icon-chevron-down"
                ></use>
              </svg>
            </span></button>
        </h2>
        <div class="ac-panel">
          <p class="ac-text">
            ${t}
          </p>
        </div>
      </div>`),_t.update()},Ut=e=>{e.target.blur(),d.value=Number(d.value)+1},Kt=e=>{e.target.blur(),Number(d.value)!=1&&(d.value=Number(d.value)-1)};Vt.addEventListener("click",Ut);zt.addEventListener("click",Kt);const Zt=e=>{e.target.blur(),Wt+=Number(d.value),le=q,be(le).then(t=>{t?Rt(t,Number(d.value)):l.error({title:"Error",message:"Failed to add book to the cart!",position:"topRight"})}).catch(console.error),l.info({title:"Hello",message:`Successfully added ${d.value} item(s) to the cart!`,position:"topRight"})};jt.addEventListener("click",Zt);const Xt=e=>{e.preventDefault(),e.target.blur(),l.success({title:"Hello",message:"Thank you for your purchase!",position:"topRight"})};Nt.addEventListener("submit",Xt);const eo=e=>{(e.target.classList.contains("mob-books-close")||e.target.classList.contains("modal-window-books-backdrop")||e.target.classList.contains("buy-button"))&&(m.classList.remove("books-window-is-open"),f.classList.remove("no-scroll"))},to=e=>{e.key==="Escape"&&(m.classList.remove("books-window-is-open"),f.classList.remove("no-scroll"))};document.addEventListener("keydown",to);m.addEventListener("click",eo);
//# sourceMappingURL=index.js.map
