import{S as B,N as M,P as $,i as a,K as W,A as se,a as w,b as re}from"./assets/vendor-cle4eI2j.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{new B(".events-swiper",{modules:[M,$],wrapperClass:"events-swiper-wrapper",slideClass:"events-swiper-slide",loop:!1,spaceBetween:20,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".events-swiper-button-next",prevEl:".events-swiper-button-prev",disabledClass:"events-swiper-button-disabled"},pagination:{el:".events-swiper-pagination",clickable:!0}}),document.querySelectorAll(".events-item-time").forEach(t=>{t.textContent=ne()})});function ne(e=30){const t=new Date,o=new Date(t.getTime()+Math.random()*e*24*60*60*1e3),r={month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return` | ${o.toLocaleString("en-US",r)}`}const T=document.getElementById("modal"),h=document.getElementById("modalBackdrop"),ie=document.getElementById("modalClose"),f=document.getElementById("registerForm"),A="register-form-data",m=f.elements.name,d=f.elements.email,I=f.elements.message;function j(){const e={name:m.value.trim(),email:d.value.trim(),message:I.value.trim()};localStorage.setItem(A,JSON.stringify(e))}function ae(){const e=localStorage.getItem(A);if(e)try{const t=JSON.parse(e);t.name&&(m.value=t.name),t.email&&(d.value=t.email),t.message&&(I.value=t.message)}catch{a.error({title:"Error",message:"Failed to restore saved data.",position:"topRight"})}}function le(){localStorage.removeItem(A)}const ce=document.querySelectorAll(".open-modal-btn"),de=T.querySelector(".modal-subtitle");ce.forEach(e=>{e.addEventListener("click",t=>{const o=e.dataset.subtitle||"";de.textContent=o,ue()})});function ue(){T.style.display="block",h.style.display="block",document.body.classList.add("modal-open"),ae()}function y(){T.style.display="none",h.style.display="none",document.body.classList.remove("modal-open")}ie.addEventListener("click",y);h.addEventListener("click",e=>{e.target===h&&y()});document.addEventListener("keydown",e=>{e.key==="Escape"&&y()});[m,d,I].forEach(e=>{e.addEventListener("input",j)});f.addEventListener("submit",e=>{e.preventDefault();const t=m.value.trim(),o=d.value.trim();[m,d].forEach(s=>{s.addEventListener("input",()=>{s.classList.remove("error"),j()})});let r=!1;if((!t||!o)&&(a.warning({title:"Warning",message:"Please fill out required fields: Name and Email",position:"topRight"}),t||m.classList.add("error"),o||d.classList.add("error"),r=!0),o&&!o.includes("@")&&(a.error({title:"Invalid Email",message:'Email must contain "@" symbol',position:"topRight"}),d.classList.add("error"),r=!0),!r)try{if(o==="error@example.com")throw new Error("Simulated server error");a.success({title:"Success",message:"Form submitted!",position:"topRight"}),f.reset(),le(),y()}catch(s){a.error({title:"Error",message:`Something went wrong: ${s.message}`,position:"topRight"})}});const S=document.querySelector("#burger-button"),P=document.querySelector("#mobile_menu"),_=document.querySelector("#nav-links"),p=document.body,me=e=>{P.classList.add("mob-menu-open"),p.classList.add("no-scroll")},pe=e=>{const t=e.target.closest("button"),o=e.target.closest(".nav-list-mob-link");(t||o)&&(P.classList.remove("mob-menu-open"),p.classList.remove("no-scroll"))},G=()=>{window.innerWidth>=768?(_.classList.remove("visually-hidden"),S.classList.add("visually-hidden")):(S.classList.remove("visually-hidden"),_.classList.add("visually-hidden"))};G();S.addEventListener("click",me);P.addEventListener("click",pe);window.addEventListener("resize",G);const be=new B(".swiper-feedback",{modules:[M,$,W],wrapperClass:"swiper-wrapper-feedback",slideClass:"swiper-slide-feedback",loop:!1,direction:"horizontal",slidesPerView:1,slidesPerGroup:1,centeredSlides:!1,simulateTouch:!0,touchRatio:1,grabCursor:!0,watchOverflow:!0,speed:250,spaceBetween:24,lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},pagination:{el:".custom-swiper-pagination",type:"bullets",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:".feedback-custom-swiper-button-next",prevEl:".feedback-custom-swiper-button-prev",disabledClass:"feedback-custom-swiper-button-disabled"},keyboard:{enabled:!0,onlyInViewport:!0}});function ge(){const e=window.innerWidth;return e>=1440?3:e>=768?2:1}function Y(){const e=be.slides.length,t=ge(),o=document.querySelector(".custom-swiper-pagination"),r=document.querySelector(".feedback-custom-swiper-button-prev"),s=document.querySelector(".feedback-custom-swiper-button-next");e<=t?(o&&(o.style.display="none"),r&&(r.style.display="none"),s&&(s.style.display="none")):(o&&(o.style.display=""),r&&(r.style.display=""),s&&(s.style.display=""))}Y();window.addEventListener("resize",()=>{Y()});new B(".hero-swiper",{modules:[M,$,se,W],direction:"horizontal",loop:!1,spaceBetween:16,grabCursor:!0,autoplay:{delay:2500,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-swiper-button-next",prevEl:".hero-swiper-button-prev"},on:{slideChange(e){const t=document.querySelector(".hero-swiper-button-next"),o=document.querySelector(".hero-swiper-button-prev");e.isEnd?t==null||t.classList.add("is-disabled"):t==null||t.classList.remove("is-disabled"),e.isBeginning?o==null||o.classList.add("is-disabled"):o==null||o.classList.remove("is-disabled")},init(e){const t=document.querySelector(".hero-swiper-button-prev");e.isBeginning?t==null||t.classList.add("is-disabled"):t==null||t.classList.remove("is-disabled")}}});document.querySelectorAll(".hero-swiper-button-prev, .hero-swiper-button-next").forEach(e=>{e.addEventListener("mouseup",()=>{e.blur()})});const fe=[{alt:"Mug with book on the table",text:"Get 10% off your ",highlight:"first order",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-1-desktop.webp",src2x:"./img/desktop-webp/banner-1-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-1-tablet.webp",src2x:"./img/tablet-webp/banner-1-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-1-mob.webp",src2x:"./img/mob-webp/banner-1-mob@2x.webp"}}},{alt:"Glasses with book on the table",text:"Save 15% on ",highlight:"some books",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-2-desktop.webp",src2x:"./img/desktop-webp/banner-2-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-2-tablet.webp",src2x:"./img/tablet-webp/banner-2-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-2-mob.webp",src2x:"./img/mob-webp/banner-2-mob@2x.webp"}}},{alt:"Shelf with books",text:"Summer Sale! ",highlight:"Up to -40% discounts",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-3-desktop.webp",src2x:"./img/desktop-webp/banner-3-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-3-tablet.webp",src2x:"./img/tablet-webp/banner-3-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-3-mob.webp",src2x:"./img/mob-webp/banner-3-mob@2x.webp"}}},{alt:"Vase on the table",text:"Last chance to buy our ",highlight:"spring bestsellers",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-4-desktop.webp",src2x:"./img/desktop-webp/banner-4-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-4-tablet.webp",src2x:"./img/tablet-webp/banner-4-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-4-mob.webp",src2x:"./img/mob-webp/banner-4-mob@2x.webp"}}}],we=document.querySelector(".hero-js"),he=e=>e.map(t=>`<li class="swiper-slide hero-swiper-slide">
      <picture>
      <source media="(min-width: 1440px)" type="image/webp" srcset="${t.images.desktop.src} 1x, ${t.images.desktop.src2x} 2x">
      <source media="(min-width: 768px)" type="image/webp" srcset="${t.images.tablet.src} 1x, ${t.images.tablet.src2x} 2x">
          <img 
            src="${t.images.mobile.src}" 
            srcset="${t.images.mobile.src} 1x, ${t.images.mobile.src2x} 2x"
            loading="lazy"
            width="343"
            height="199"
            alt="${t.alt}" />
          </picture>
          <div class="banner-wrapper">
            <p class="hero-text">
              ${t.text}<span class="hero-text-wrap">${t.highlight}</span>
            </p>
            <a class="hero-link" href="${t.link}">Shop Now!</a>
          </div>
        </li>`).join(""),ye=e=>{we.innerHTML=he(e)};ye(fe);w.defaults.baseURL="https://books-backend.p.goit.global/books/";let k=null,v=null;async function J(){if(k!==null)return k;try{const t=(await w.get("category-list")).data.filter(o=>o&&o.list_name&&o.list_name.trim()!==""&&o.list_name.trim()!==" ");return k=t,t}catch{return a.error({title:"Error",message:"Failed to load categories",position:"topRight"}),[]}}async function ke(){try{return(await w.get("top-books")).data}catch{return a.error({title:"Error",message:"Failed to load top books",position:"topRight"}),[]}}async function R(e){try{const t=encodeURIComponent(e);return(await w.get(`category?category=${t}`)).data}catch{return a.error({title:"Error",message:`Failed to load books for category: ${e}`,position:"topRight"}),[]}}async function ve(e){try{return(await w.get(e)).data}catch{return a.error({title:"Error",message:"Failed to load book details",position:"topRight"}),[]}}async function U(){if(v!==null)return v;try{const e=await J();if(!e||!Array.isArray(e))return[];const t=e.filter(i=>i.list_name).map(i=>i.list_name),r=(await Promise.all(t.map(R))).flat(),s=new Set,n=r.filter(i=>{if(!i.title||!i.price||parseFloat(i.price)<=0)return!1;const l=i.title.trim().toLowerCase();return s.has(l)?!1:(s.add(l),!0)});return v=n,n}catch{return a.error({title:"Error",message:"Failed to load all books",position:"topRight"}),[]}}const b=document.querySelector(".top-books-list"),Le=document.querySelector(".dropdown-menu"),K=document.querySelector(".show-more-btn"),z=document.querySelector(".show-count");let g=[],H=1,Ee="All categories";const Se="Top";let L=null;async function xe(){return L===null&&(L=(await U()).length),L}async function Q(e,t={}){const{isInitialLoad:o=!1,selectedCategory:r="All categories",resetContent:s=!0}=t;try{if(s&&(Pe(),Te()),!Array.isArray(e)){a.warning({title:"Warning",message:"displayBooks: books should be an array",position:"topRight"});return}const n=Z(e);Ae(n),Ee=r;const i=O(),l=n.slice(0,i);Ge(l.length),l.length>0?X(l):Re(),o&&await Oe(),await te(),De(n.length>i)}catch{a.error({title:"Error",message:"Error in displayBooks function",position:"topRight"}),He()}}function X(e){const t=e.map(o=>`
        <li class="top-book-item" id="${o._id}">
            <img
              class="top-book-img"
              src="${o.book_image}"
              alt="${o.title}"
              width="343" height="488"
              loading="lazy"
            />
          <div class="top-book-info">
          <div class="top-book-info-wrap">
            <h3 class="top-book-title">${o.title}</h3>
            <p class="top-book-price">$${o.price}</p>
            </div>
            <p class="top-book-author">${o.author}</p>
          </div>
          <button class="top-book-btn" type="button">
            Learn More
          </button>
        </li>
      `).join("");b.insertAdjacentHTML("beforeend",t)}function Ce(e){return e.filter(t=>t&&t.list_name&&t.list_name.trim()!==""&&t.list_name.trim()!==" "&&t.list_name.toLowerCase()!=="undefined"&&t.list_name.toLowerCase()!=="null")}async function qe(e){const o=e.filter(r=>r&&r.trim()!==""&&r.trim()!==" "&&r.toLowerCase()!=="undefined"&&r.toLowerCase()!=="null").map(r=>`<li class="dropdown-item"><p>${r}</p></li>`).join("");Le.insertAdjacentHTML("beforeend",o)}async function Be(e,t){z.innerHTML="";const o=`<p>Showing ${e} of ${t}</p>`;z.insertAdjacentHTML("beforeend",o)}function O(){return window.innerWidth>=768?24:10}function Me(){return H}function $e(){H+=1}function Te(){H=1}function Z(e){const t=new Set;return e.filter(o=>{if(!o.title||!o.price||parseFloat(o.price)<=0)return!1;const r=o.title.trim().toLowerCase();return t.has(r)?!1:(t.add(r),!0)})}function Ae(e){g.length=0,g.push(...e)}const Ie=()=>K.classList.remove("is-hidden"),ee=()=>K.classList.add("is-hidden");function Pe(){b.innerHTML=""}function Re(){b.innerHTML='<li class="empty-state">No books found</li>'}function He(){b.innerHTML='<li class="error-state">Error loading books</li>'}async function Oe(){try{const e=await J(),o=Ce(e).map(async n=>{try{const i=await R(n.list_name),l=Z(i);return{name:n.list_name,count:l.length}}catch{return a.error({title:"Error",message:"Error initializing categories",position:"topRight"}),{name:n.list_name,count:0}}}),s=(await Promise.all(o)).filter(n=>n.count>0).map(n=>n.name);qe(s)}catch{a.error({title:"Error",message:"Error initializing categories",position:"topRight"})}}async function te(){try{const e=await xe(),t=je();Be(t,e)}catch{a.error({title:"Error",message:"Error updating books counter",position:"topRight"})}}function De(e){e?Ie():ee()}function Fe(e){return Array.isArray(e)?e.flatMap(t=>t&&Array.isArray(t.books)?t.books:[]):(a.warning({title:"Warning",message:"Incorrect categories data",position:"topRight"}),[])}function _e(){const e=document.querySelector(".loading-indicator");e&&e.classList.remove("is-hidden")}function ze(){const e=document.querySelector(".loading-indicator");e&&e.classList.add("is-hidden")}function Ne(){b.innerHTML=`
    <li class="error-state">
      <p>Failed to load books. Please refresh the page.</p>
      <button onclick="location.reload()" class="retry-btn">Refresh</button>
    </li>
  `}async function Ve(){try{_e();const e=await ke(),t=Fe(e);await Q(t,{isInitialLoad:!0,selectedCategory:Se,resetContent:!0}),ze()}catch{a.error({title:"Error",message:"App initialization error",position:"topRight"}),Ne()}}function We(e){const t=document.querySelector(e),o=t.querySelector(".dropdown-btn");t.querySelector(".dropdown-menu");const r=t.querySelector(".dropdown-text"),s=t.querySelectorAll(".dropdown-item"),n=t.querySelector(".dropdown-item.selected");n&&(r.textContent=n.textContent),o.onclick=()=>t.classList.toggle("open"),s.forEach(i=>{i.onclick=()=>{s.forEach(l=>l.classList.remove("selected")),i.classList.add("selected"),r.textContent=i.textContent,t.classList.remove("open"),t.dispatchEvent(new CustomEvent("change",{detail:{value:i.dataset.value,text:i.textContent}}))}}),document.onclick=i=>{t.contains(i.target)||t.classList.remove("open")}}document.addEventListener("DOMContentLoaded",Ve);We("#categoryDropdown");document.querySelector("#categoryDropdown").addEventListener("change",e=>{});const N=document.querySelector(".dropdown-menu"),x=document.querySelector(".show-more-btn"),V=4;let D=O();function je(){return D}function Ge(e){D=e}async function Ye(){x.blur(),$e();const e=Me(),o=O()+(e-2)*V,r=o+V,s=g.slice(o,r);D=Math.min(r,g.length),X(s),await te();const n=document.querySelector(".top-book-item");if(n){const i=n.getBoundingClientRect().height;window.scrollBy({top:i,behavior:"smooth"})}r>=g.length&&(ee(),a.info({message:"You've reached the end of the book list.",position:"topRight"}))}function Je(e){return e&&e.trim()!==""&&e.trim()!==" "&&e.toLowerCase()!=="undefined"&&e.toLowerCase()!=="null"}async function Ue(e){const t=e.target.closest(".dropdown-item");if(!t)return;const o=t.textContent.trim();if(!Je(o)){a.warning({title:"Warning",message:"Invalid category selected",position:"topRight"});return}const r=document.querySelector(".dropdown-btn .dropdown-text");r&&(r.textContent=o);let s;o==="All categories"?s=await U():s=await R(o),await Q(s,{selectedCategory:o,resetContent:!0}),document.querySelector("#categoryDropdown").classList.remove("open")}x&&x.addEventListener("click",Ye);N&&N.addEventListener("click",Ue);const C=document.querySelector(".scroll-up");window.addEventListener("scroll",()=>{window.scrollY>800?C.classList.add("visible"):C.classList.remove("visible")});C.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".footer-form"),t=document.querySelector(".footer-form-input");e.addEventListener("submit",function(r){if(r.preventDefault(),t.value=t.value.trim(),!t.checkValidity()){t.classList.add("error");let n="Please enter a valid email address";t.validity.valueMissing?n="Email field cannot be empty":t.validity.typeMismatch?n="Please enter a valid email format (example@domain.com)":t.validity.patternMismatch&&(n="Email format not supported. Use simple format like name@domain.com"),a.error({title:"Error",message:n,position:"topRight",timeout:4e3});return}if((JSON.parse(localStorage.getItem("subscribedEmails"))||[]).some(n=>n.email===t.value)){t.classList.add("error"),a.warning({title:"Warning",message:"You are already subscribed with this email address",position:"topRight",timeout:4e3});return}o(t.value),t.value="",a.success({title:"Success!",message:"Thank you! Your email has been successfully submitted.",position:"topRight",timeout:4e3,theme:"light"})}),t.addEventListener("input",function(){this.classList.remove("error")});function o(r){let s=JSON.parse(localStorage.getItem("subscribedEmails"))||[];s.push({email:r}),localStorage.setItem("subscribedEmails",JSON.stringify(s))}});const Ke=new re("#accordion",{showMultiple:!0}),Qe=document.querySelector("#text-wrap-modal-books"),oe=document.querySelector("#accordion"),u=document.querySelector("#modal-books"),Xe=document.querySelector("#book-modal-form"),Ze=document.querySelector("#cart-button"),q=u.querySelector("#dynamic-text");let E;const F=document.querySelector("#quantity-wrapper"),et=F.children[0],c=F.children[1],tt=F.children[2];let ot=0;const st=async e=>{if(e.target.classList.contains("top-book-btn"))if(u.classList.add("books-window-is-open"),p.classList.add("no-scroll"),c.value=1,E=e.target.closest("li").id,E)try{const o=await ve(E);nt(o)}catch(o){a.error({title:"Error",message:`Failed to fetch book data: ${o}`})}else a.error({title:"Error",message:"Book ID not found"}),u.classList.remove("books-window-is-open"),p.classList.remove("no-scroll")};b.addEventListener("click",st);const rt=()=>{const e=oe.querySelector(".ac-dynamic");e&&e.remove();const t=u.querySelector(".books-modal-image");t&&t.remove(),q&&(q.innerHTML="")},nt=({title:e,description:t,author:o,book_image:r,book_image_width:s,book_image_height:n,price:i})=>{rt(),t===""&&(t="There is no description for this book."),Qe.insertAdjacentHTML("beforebegin",`<img  class="books-modal-image" loading="lazy" src="${r}" width="${s}" height="${n}" alt="${e}">`),q.insertAdjacentHTML("afterbegin",`<h2 class="book-title-modal">${e}</h2>
        <h3 class="book-author-modal">${o}</h3>
        <h3 class="book-price">$${i}</h3>`),oe.insertAdjacentHTML("afterbegin",`<div class="ac ac-dynamic">
          <h2 class="ac-header">
            <button type="button" class="ac-trigger">Details
              <span class="chevron-span">
                <svg class="icon-chevron" width="24" height="25">
                  <use
                    class="chevron-use"
                    href="./img/icons.svg#icon-chevron-down"
                  ></use>
                </svg>
              </span></button>
          </h2>
          <div class="ac-panel">
            <p class="ac-text">
              ${t}
            </p>
          </div>
        </div>`),Ke.update()},it=e=>{e.target.blur(),c.value=Number(c.value)+1},at=e=>{e.target.blur(),Number(c.value)!=1&&(c.value=Number(c.value)-1)};tt.addEventListener("click",it);et.addEventListener("click",at);const lt=e=>{e.target.blur(),ot+=Number(c.value),a.info({title:"Hello",message:`Successfully added ${c.value} items to the cart!`})};Ze.addEventListener("click",lt);const ct=e=>{e.preventDefault(),e.target.blur(),a.info({title:"Hello",message:"Thank you for your purchase!"})};Xe.addEventListener("submit",ct);const dt=e=>{(e.target.classList.contains("mob-books-close")||e.target.classList.contains("modal-window-books-backdrop")||e.target.classList.contains("buy-button"))&&(u.classList.remove("books-window-is-open"),p.classList.remove("no-scroll"))},ut=e=>{e.key==="Escape"&&(u.classList.remove("books-window-is-open"),p.classList.remove("no-scroll"))};document.addEventListener("keydown",ut);u.addEventListener("click",dt);
//# sourceMappingURL=index.js.map
