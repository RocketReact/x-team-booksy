import{S as L,N as S,P as C,i as a,K as z,A as Q,a as g}from"./assets/vendor-BfQkWcLn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{new L(".events-swiper",{modules:[S,C],wrapperClass:"events-swiper-wrapper",slideClass:"events-swiper-slide",loop:!1,spaceBetween:20,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".events-swiper-button-next",prevEl:".events-swiper-button-prev",disabledClass:"events-swiper-button-disabled"},pagination:{el:".events-swiper-pagination",clickable:!0}}),document.querySelectorAll(".events-item-time").forEach(e=>{e.textContent=X()})});function X(t=30){const e=new Date,o=new Date(e.getTime()+Math.random()*t*24*60*60*1e3),r={month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return` | ${o.toLocaleString("en-US",r)}`}const x=document.getElementById("modal"),b=document.getElementById("modalBackdrop"),Z=document.getElementById("modalClose"),p=document.getElementById("registerForm"),B="register-form-data",d=p.elements.name,c=p.elements.email,q=p.elements.message;function F(){const t={name:d.value.trim(),email:c.value.trim(),message:q.value.trim()};localStorage.setItem(B,JSON.stringify(t))}function ee(){const t=localStorage.getItem(B);if(t)try{const e=JSON.parse(t);e.name&&(d.value=e.name),e.email&&(c.value=e.email),e.message&&(q.value=e.message)}catch{a.error({title:"Error",message:"Failed to restore saved data.",position:"topRight"})}}function te(){localStorage.removeItem(B)}const oe=document.querySelectorAll(".open-modal-btn"),se=x.querySelector(".modal-subtitle");oe.forEach(t=>{t.addEventListener("click",e=>{const o=t.dataset.subtitle||"";se.textContent=o,re()})});function re(){x.style.display="block",b.style.display="block",document.body.classList.add("modal-open"),ee()}function f(){x.style.display="none",b.style.display="none",document.body.classList.remove("modal-open")}Z.addEventListener("click",f);b.addEventListener("click",t=>{t.target===b&&f()});document.addEventListener("keydown",t=>{t.key==="Escape"&&f()});[d,c,q].forEach(t=>{t.addEventListener("input",F)});p.addEventListener("submit",t=>{t.preventDefault();const e=d.value.trim(),o=c.value.trim();[d,c].forEach(s=>{s.addEventListener("input",()=>{s.classList.remove("error"),F()})});let r=!1;if((!e||!o)&&(a.warning({title:"Warning",message:"Please fill out required fields: Name and Email",position:"topRight"}),e||d.classList.add("error"),o||c.classList.add("error"),r=!0),o&&!o.includes("@")&&(a.error({title:"Invalid Email",message:'Email must contain "@" symbol',position:"topRight"}),c.classList.add("error"),r=!0),!r)try{if(o==="error@example.com")throw new Error("Simulated server error");a.success({title:"Success",message:"Form submitted!",position:"topRight"}),p.reset(),te(),f()}catch(s){a.error({title:"Error",message:`Something went wrong: ${s.message}`,position:"topRight"})}});const k=document.querySelector("#burger-button"),M=document.querySelector("#mobile_menu"),$=document.querySelector("#nav-links"),D=document.body,ne=t=>{M.classList.add("mob-menu-open"),D.classList.add("no-scroll")},ie=t=>{const e=t.target.closest("button"),o=t.target.closest(".nav-list-mob-link");(e||o)&&(M.classList.remove("mob-menu-open"),D.classList.remove("no-scroll"))},V=()=>{window.innerWidth>=768?($.classList.remove("visually-hidden"),k.classList.add("visually-hidden")):(k.classList.remove("visually-hidden"),$.classList.add("visually-hidden"))};V();k.addEventListener("click",ne);M.addEventListener("click",ie);window.addEventListener("resize",V);const ae=new L(".swiper-feedback",{modules:[S,C,z],wrapperClass:"swiper-wrapper-feedback",slideClass:"swiper-slide-feedback",loop:!1,direction:"horizontal",slidesPerView:1,slidesPerGroup:1,centeredSlides:!1,simulateTouch:!0,touchRatio:1,grabCursor:!0,watchOverflow:!0,speed:250,spaceBetween:24,lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},breakpoints:{768:{slidesPerView:2,slidesPerGroup:1},1440:{slidesPerView:3,slidesPerGroup:1}},pagination:{el:".custom-swiper-pagination",type:"bullets",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:".feedback-custom-swiper-button-next",prevEl:".feedback-custom-swiper-button-prev",disabledClass:"feedback-custom-swiper-button-disabled"},keyboard:{enabled:!0,onlyInViewport:!0}});function le(){const t=window.innerWidth;return t>=1440?3:t>=768?2:1}function N(){const t=ae.slides.length,e=le(),o=document.querySelector(".custom-swiper-pagination"),r=document.querySelector(".feedback-custom-swiper-button-prev"),s=document.querySelector(".feedback-custom-swiper-button-next");t<=e?(o&&(o.style.display="none"),r&&(r.style.display="none"),s&&(s.style.display="none")):(o&&(o.style.display=""),r&&(r.style.display=""),s&&(s.style.display=""))}N();window.addEventListener("resize",()=>{N()});new L(".hero-swiper",{modules:[S,C,Q,z],direction:"horizontal",loop:!1,spaceBetween:16,grabCursor:!0,autoplay:{delay:2500,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-swiper-button-next",prevEl:".hero-swiper-button-prev"},on:{slideChange(t){const e=document.querySelector(".hero-swiper-button-next"),o=document.querySelector(".hero-swiper-button-prev");t.isEnd?e==null||e.classList.add("is-disabled"):e==null||e.classList.remove("is-disabled"),t.isBeginning?o==null||o.classList.add("is-disabled"):o==null||o.classList.remove("is-disabled")},init(t){const e=document.querySelector(".hero-swiper-button-prev");t.isBeginning?e==null||e.classList.add("is-disabled"):e==null||e.classList.remove("is-disabled")}}});document.querySelectorAll(".hero-swiper-button-prev, .hero-swiper-button-next").forEach(t=>{t.addEventListener("mouseup",()=>{t.blur()})});const ce=[{alt:"Mug with book on the table",text:"Get 10% off your ",highlight:"first order",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-1-desktop.webp",src2x:"./img/desktop-webp/banner-1-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-1-tablet.webp",src2x:"./img/tablet-webp/banner-1-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-1-mob.webp",src2x:"./img/mob-webp/banner-1-mob@2x.webp"}}},{alt:"Glasses with book on the table",text:"Save 15% on ",highlight:"some books",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-2-desktop.webp",src2x:"./img/desktop-webp/banner-2-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-2-tablet.webp",src2x:"./img/tablet-webp/banner-2-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-2-mob.webp",src2x:"./img/mob-webp/banner-2-mob@2x.webp"}}},{alt:"Shelf with books",text:"Summer Sale! ",highlight:"Up to -40% discounts",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-3-desktop.webp",src2x:"./img/desktop-webp/banner-3-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-3-tablet.webp",src2x:"./img/tablet-webp/banner-3-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-3-mob.webp",src2x:"./img/mob-webp/banner-3-mob@2x.webp"}}},{alt:"Vase on the table",text:"Last chance to buy our ",highlight:"spring bestsellers",link:"#books",images:{desktop:{src:"./img/desktop-webp/banner-4-desktop.webp",src2x:"./img/desktop-webp/banner-4-desktop@2x.webp"},tablet:{src:"./img/tablet-webp/banner-4-tablet.webp",src2x:"./img/tablet-webp/banner-4-tablet@2x.webp"},mobile:{src:"./img/mob-webp/banner-4-mob.webp",src2x:"./img/mob-webp/banner-4-mob@2x.webp"}}}],de=document.querySelector(".hero-js"),ue=t=>t.map(e=>`<li class="swiper-slide hero-swiper-slide">
      <picture>
      <source media="(min-width: 1440px)" type="image/webp" srcset="${e.images.desktop.src} 1x, ${e.images.desktop.src2x} 2x">
      <source media="(min-width: 768px)" type="image/webp" srcset="${e.images.tablet.src} 1x, ${e.images.tablet.src2x} 2x">
          <img 
            src="${e.images.mobile.src}" 
            srcset="${e.images.mobile.src} 1x, ${e.images.mobile.src2x} 2x"
            loading="lazy"
            width="343"
            height="199"
            alt="${e.alt}" />
          </picture>
          <div class="banner-wrapper">
            <p class="hero-text">
              ${e.text}<span class="hero-text-wrap">${e.highlight}</span>
            </p>
            <a class="hero-link" href="${e.link}">Shop Now!</a>
          </div>
        </li>`).join(""),pe=t=>{de.innerHTML=ue(t)};pe(ce);g.defaults.baseURL="https://books-backend.p.goit.global/books/";let w=null,h=null;async function W(){if(w!==null)return w;try{const e=(await g.get("category-list")).data.filter(o=>o&&o.list_name&&o.list_name.trim()!==""&&o.list_name.trim()!==" ");return w=e,e}catch{return a.error({title:"Error",message:"Failed to load categories",position:"topRight"}),[]}}async function me(){try{return(await g.get("top-books")).data}catch{return a.error({title:"Error",message:"Failed to load top books",position:"topRight"}),[]}}async function P(t){try{const e=encodeURIComponent(t);return(await g.get(`category?category=${e}`)).data}catch{return a.error({title:"Error",message:`Failed to load books for category: ${t}`,position:"topRight"}),[]}}async function G(){if(h!==null)return h;try{const t=await W();if(!t||!Array.isArray(t))return[];const e=t.filter(i=>i.list_name).map(i=>i.list_name),r=(await Promise.all(e.map(P))).flat(),s=new Set,n=r.filter(i=>{if(!i.title||!i.price||parseFloat(i.price)<=0)return!1;const l=i.title.trim().toLowerCase();return s.has(l)?!1:(s.add(l),!0)});return h=n,n}catch{return a.error({title:"Error",message:"Failed to load all books",position:"topRight"}),[]}}const m=document.querySelector(".top-books-list"),be=document.querySelector(".dropdown-menu"),H=document.querySelector(".show-more-btn"),R=document.querySelector(".show-count");let u=[],T=1,ge="All categories";const fe="Top";let y=null;async function we(){return y===null&&(y=(await G()).length),y}async function j(t,e={}){const{isInitialLoad:o=!1,selectedCategory:r="All categories",resetContent:s=!0}=e;try{if(s&&(xe(),Le()),!Array.isArray(t)){a.warning({title:"Warning",message:"displayBooks: books should be an array",position:"topRight"});return}const n=J(t);Se(n),ge=r;const i=A(),l=n.slice(0,i);ze(l.length),l.length>0?Y(l):Be(),o&&await Me(),await K(),Pe(n.length>i)}catch{a.error({title:"Error",message:"Error in displayBooks function",position:"topRight"}),qe()}}function Y(t){const e=t.map(o=>`
        <li class="top-book-item" id="${o._id}">
            <img
              class="top-book-img"
              src="${o.book_image}"
              alt="${o.title}"
              width="343" height="488"
              loading="lazy"
            />
          <div class="top-book-info">
          <div class="top-book-info-wrap">
            <h3 class="top-book-title">${o.title}</h3>
            <p class="top-book-price">$${o.price}</p>
            </div>
            <p class="top-book-author">${o.author}</p>
          </div>
          <button class="top-book-btn" type="button">
            Learn More
          </button>
        </li>
      `).join("");m.insertAdjacentHTML("beforeend",e)}function he(t){return t.filter(e=>e&&e.list_name&&e.list_name.trim()!==""&&e.list_name.trim()!==" "&&e.list_name.toLowerCase()!=="undefined"&&e.list_name.toLowerCase()!=="null")}async function ye(t){const o=t.filter(r=>r&&r.trim()!==""&&r.trim()!==" "&&r.toLowerCase()!=="undefined"&&r.toLowerCase()!=="null").map(r=>`<li class="dropdown-item"><p>${r}</p></li>`).join("");be.insertAdjacentHTML("beforeend",o)}async function ke(t,e){R.innerHTML="";const o=`<p>Showing ${t} of ${e}</p>`;R.insertAdjacentHTML("beforeend",o)}function A(){return window.innerWidth>=768?24:10}function ve(){return T}function Ee(){T+=1}function Le(){T=1}function J(t){const e=new Set;return t.filter(o=>{if(!o.title||!o.price||parseFloat(o.price)<=0)return!1;const r=o.title.trim().toLowerCase();return e.has(r)?!1:(e.add(r),!0)})}function Se(t){u.length=0,u.push(...t)}const Ce=()=>H.classList.remove("is-hidden"),U=()=>H.classList.add("is-hidden");function xe(){m.innerHTML=""}function Be(){m.innerHTML='<li class="empty-state">No books found</li>'}function qe(){m.innerHTML='<li class="error-state">Error loading books</li>'}async function Me(){try{const t=await W(),o=he(t).map(async n=>{try{const i=await P(n.list_name),l=J(i);return{name:n.list_name,count:l.length}}catch{return a.error({title:"Error",message:"Error initializing categories",position:"topRight"}),{name:n.list_name,count:0}}}),s=(await Promise.all(o)).filter(n=>n.count>0).map(n=>n.name);ye(s)}catch{a.error({title:"Error",message:"Error initializing categories",position:"topRight"})}}async function K(){try{const t=await we(),e=_e();ke(e,t)}catch{a.error({title:"Error",message:"Error updating books counter",position:"topRight"})}}function Pe(t){t?Ce():U()}function Te(t){return Array.isArray(t)?t.flatMap(e=>e&&Array.isArray(e.books)?e.books:[]):(a.warning({title:"Warning",message:"Incorrect categories data",position:"topRight"}),[])}function Ae(){const t=document.querySelector(".loading-indicator");t&&t.classList.remove("is-hidden")}function Ie(){const t=document.querySelector(".loading-indicator");t&&t.classList.add("is-hidden")}function $e(){m.innerHTML=`
    <li class="error-state">
      <p>Failed to load books. Please refresh the page.</p>
      <button onclick="location.reload()" class="retry-btn">Refresh</button>
    </li>
  `}async function Re(){try{Ae();const t=await me(),e=Te(t);await j(e,{isInitialLoad:!0,selectedCategory:fe,resetContent:!0}),Ie()}catch{a.error({title:"Error",message:"App initialization error",position:"topRight"}),$e()}}function Oe(t){const e=document.querySelector(t),o=e.querySelector(".dropdown-btn");e.querySelector(".dropdown-menu");const r=e.querySelector(".dropdown-text"),s=e.querySelectorAll(".dropdown-item"),n=e.querySelector(".dropdown-item.selected");n&&(r.textContent=n.textContent),o.onclick=()=>e.classList.toggle("open"),s.forEach(i=>{i.onclick=()=>{s.forEach(l=>l.classList.remove("selected")),i.classList.add("selected"),r.textContent=i.textContent,e.classList.remove("open"),e.dispatchEvent(new CustomEvent("change",{detail:{value:i.dataset.value,text:i.textContent}}))}}),document.onclick=i=>{e.contains(i.target)||e.classList.remove("open")}}document.addEventListener("DOMContentLoaded",Re);Oe("#categoryDropdown");document.querySelector("#categoryDropdown").addEventListener("change",t=>{});const O=document.querySelector(".dropdown-menu"),v=document.querySelector(".show-more-btn"),_=4;let I=A();function _e(){return I}function ze(t){I=t}async function Fe(){v.blur(),Ee();const t=ve(),o=A()+(t-2)*_,r=o+_,s=u.slice(o,r);I=Math.min(r,u.length),Y(s),await K(),r>=u.length&&(U(),a.info({message:"You've reached the end of the book list.",position:"topRight"}))}function De(t){return t&&t.trim()!==""&&t.trim()!==" "&&t.toLowerCase()!=="undefined"&&t.toLowerCase()!=="null"}async function Ve(t){const e=t.target.closest(".dropdown-item");if(!e)return;const o=e.textContent.trim();if(!De(o)){a.warning({title:"Warning",message:"Invalid category selected",position:"topRight"});return}const r=document.querySelector(".dropdown-btn .dropdown-text");r&&(r.textContent=o);let s;o==="All categories"?s=await G():s=await P(o),await j(s,{selectedCategory:o,resetContent:!0}),document.querySelector("#categoryDropdown").classList.remove("open")}v&&v.addEventListener("click",Fe);O&&O.addEventListener("click",Ve);const E=document.querySelector(".scroll-up");window.addEventListener("scroll",()=>{window.scrollY>800?E.classList.add("visible"):E.classList.remove("visible")});E.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".footer-form"),e=document.querySelector(".footer-form-input");t.addEventListener("submit",function(r){if(r.preventDefault(),e.value=e.value.trim(),!e.checkValidity()){e.classList.add("error");let n="Please enter a valid email address";e.validity.valueMissing?n="Email field cannot be empty":e.validity.typeMismatch?n="Please enter a valid email format (example@domain.com)":e.validity.patternMismatch&&(n="Email format not supported. Use simple format like name@domain.com"),a.error({title:"Error",message:n,position:"topRight",timeout:4e3});return}if((JSON.parse(localStorage.getItem("subscribedEmails"))||[]).some(n=>n.email===e.value)){e.classList.add("error"),a.warning({title:"Warning",message:"You are already subscribed with this email address",position:"topRight",timeout:4e3});return}o(e.value),e.value="",a.success({title:"Success!",message:"Thank you! Your email has been successfully submitted.",position:"topRight",timeout:4e3,theme:"light"})}),e.addEventListener("input",function(){this.classList.remove("error")});function o(r){let s=JSON.parse(localStorage.getItem("subscribedEmails"))||[];s.push({email:r}),localStorage.setItem("subscribedEmails",JSON.stringify(s))}});
//# sourceMappingURL=index.js.map
